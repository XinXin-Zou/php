<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br>
	<div id="text"></div>
	<script type="text/javascript">
		//监听button对象
		document.getElementById('button').addEventListener('click',loadText);
		//实现loadText方法
		function loadText(){
			//Asynchronouse javaScript And XML
			//axios Fetch API prototype NODE API jQuery
			//XMLHttpRequest

			//1.实例化xhr对象
			var xhr=new XMLHttpRequest();
			// console.log(xhr.readyState);//0
			// console.log(xhr);
			//2.配置对象信息	type url/file asyn(是否异步)
			xhr.open("GET","sample.txt",true);
			// console.log(xhr.readyState);//1

			//3.执行处理数据的方法
			// xhr.onload=function(){
			// 	if (this.status==200) {
			// 		console.log(this.responseText);
			// 	}
			// 	console.log(xhr.readyState);//4
			// }

			//得到状态3
			xhr.onprogress=function(){
				console.log('加载页面'+this.readyState);
			}

			xhr.onreadystatechange=function(){
				if (this.readyState==4&&this.status==200) {//只打印一遍
					// console.log(this.responseText);
					document.getElementById('text').innerHTML=this.responseText;
				}
				console.log(xhr.readyState);//2 3 4
			}
			//4.发送请求
			xhr.send();
		}

		//readyState
		// 0: 请求未初始化
		// 1: 服务器连接已建立
		// 2: 请求已接收
		// 3: 请求处理中
		// 4: 请求已完成，且响应已就绪

		//200:ok
		//404:页面未找到
	</script>
</body>
</html>